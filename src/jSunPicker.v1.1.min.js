!function(t){function e(e,i,n){this.element=t(e);var s=this.element.data();this.picker=t("<div class='sunpicker jsunpicker' />"),this.options=t.extend({language:"en-US",daysTitle:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthsTitle:["January","February","March","April","May","June","July","August","September","October","November","December"],dayShort:2,monthShort:3,showIcon:null,inline:null,startDay:1,pickerType:"date",displayFormat:"W, T d, Y H:N:S A",outputFormat:"U",minDate:null,maxDate:null,minTime:null,maxTime:null,disabledDays:null,disabledDates:null,initialDate:null,onShow:t.noop,onClose:t.noop,onSelect:t.noop},n,s),this.pickerElement=this.pickerElement(),this.pickerInit=this.pickerElement.initElement,this.clone=this.pickerElement.clone,null!==this.options.initialDate&&""!==this.options.initialDate&&(this.initialDate=this.options.initialDate,this.select(this.initialDate)),this.options.inline?(this.render(this.options.pickerType,this.initialDate),this.picker.css({display:"inline-block",position:"relative","z-index":"100"}),t(this.options.inline).append(this.picker)):(this.element.after(this.picker),this.picker.css(this.pickerPosition(this.pickerInit))),this.pickerInit.click(t.proxy((function(){null==this.options.inline&&this.picker.toggle(),this.render(this.options.pickerType,this.element.attr("data-selected-value"))}),this)),this.clone.change(t.proxy((function(){var t=this.formatDate(this.clone.val(),"Y/M/D H:N:S");this.select(t),this.render(this.options.pickerType,t)}),this)),this.picker.on("click",".prevButton, .titleButton, .nextButton",t.proxy((function(e){var i=t(e.currentTarget);i.data("view")&&i.data("nav")&&this.render(i.data("view"),i.data("nav"))}),this)),this.picker.on("click",".year, .month",t.proxy((function(e){var i=t(e.currentTarget);if("datetime"==this.options.pickerType||"date"==this.options.pickerType)i.data("view")&&i.data("nav")&&this.render(i.data("view"),i.data("nav"));else if(!i.hasClass("disabled")){i.addClass("selected").siblings().removeClass("selected");var n=i.data("nav");this.select(n),this.picker.hide()}}),this)),this.picker.on("click",".day, .otherday, .fav",t.proxy((function(e){var i=t(e.currentTarget);if(!i.hasClass("disabled")){i.addClass("selected").siblings().removeClass("selected");var n=i.data("nav");this.select(n),"datetime"==this.options.pickerType?this.render("time",n):null==this.options.inline?this.picker.hide():this.render(this.options.pickerType,n)}}),this)),this.picker.on("change",".time",t.proxy((function(e){var i=t(e.currentTarget),n=i.find(".error"),s=i.find(".timeButton"),a=i.find(".hour").val()+":"+i.find(".min").val()+":"+i.find(".sec").val()+" "+(i.find(".ampm").is(":checked")?"PM":"AM");this.minMax(s.data("date")+a,s.data("date")+this.options.minTime,s.data("date")+this.options.maxTime)?n.html("Invalid Time"):n.html(""),s.data("nav",s.data("date")+a).val(a).text(a)}),this)),this.picker.on("click",".timeButton",t.proxy((function(e){var i=t(e.currentTarget);e.preventDefault();var n=this.minMax(i.data("nav"),i.data("date")+this.options.minTime,i.data("date")+this.options.maxTime);-1==["datetime","time"].indexOf(this.options.pickerType)||n||(this.element.val(this.formatDate(i.data("nav"),this.options.outputFormat)),this.clone.val(this.formatDate(i.data("nav"),this.options.displayFormat)),null==this.options.inline?this.picker.hide():"datetime"==this.options.pickerType&&this.render("date",i.data("nav")))}),this))}t.fn.jSunPicker=function(t){return this.each((function(i){new e(this,i,t)}))},e.prototype={dateComponents:function(t){var e=t&&Date.parse(t.replace(/-/g,"/"))?new Date(Date.parse(t.replace(/-/g,"/"))):new Date;return{year:e.getFullYear(),month:e.getMonth(),date:e.getDate(),day:e.getDay(),hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds()}},dateRange:function(t){var e=[],n=t.split(",");for(i=0;i<n.length;i++)if(n[i].search("-")>=0)for(var s=n[i].split("-"),a=new Date(s[0]),r=new Date(s[1]);a<=r;)e.push(a.valueOf()),a=new Date(a.setDate(a.getDate()+1));else e.push(new Date(n[i]).valueOf());return e},minMax:function(t,e,i){var n=!1;return t&&null!==e&&(n=new Date(t)-new Date(e)<0),t&&null!==i&&!n&&(n=new Date(t)-new Date(i)>0),n},select:function(e){this.element.attr("data-selected-Value",e).val(this.formatDate(e,this.options.outputFormat)),this.clone.val(this.formatDate(e,this.options.displayFormat)),t.isFunction(this.options.onSelect)&&this.options.onSelect(e)},destroy:function(){this.picker&&(this.picker.remove(),this.picker=null,t.isFunction(this.options.onClose)&&this.options.onClose())},render:function(e,i){this.picker.html(this.renderCalendar(e,i)),t.isFunction(this.options.onShow)&&this.options.onShow()},pickerElement:function(){return this.clone=this.element.clone().removeAttr("name").attr("autocomplete","off").attr("id",this.element.attr("id")+"_clone"),this.element.after(this.clone),null!=this.options.showIcon?this.clone.after(this.initElement=t("<span class='calendarButton'><img src='"+this.options.showIcon+"' /></span>")):this.initElement=this.clone,this.element.hide(),pickerElement={initElement:this.initElement,clone:this.clone,original:this.element}},pickerPosition:function(){var e=this.clone,i=(e.offset().left,e.offset().top),n=this.picker.outerHeight();return Math.abs(t(window).height()-i+e.outerHeight())>n?{"margin-top":e.height}:{"margin-top":-1*n-4}},leadZero:function(t){return t<10?"0"+t:t},formatDate:function(t,e){var i,n=this.dateComponents(t),s={d:n.date,D:this.leadZero(n.date),m:n.month+1,M:this.leadZero(n.month+1),t:this.options.monthsTitle[n.month].substring(0,this.options.monthShort),T:this.options.monthsTitle[n.month],y:n.year.toString().substring(2,2),Y:n.year,w:this.options.daysTitle[n.day].substring(0,this.options.dayShort),W:this.options.daysTitle[n.day],h:e.match(/a/gi)?n.hours%12?n.hours%12:12:n.hours,H:e.match(/a/gi)?this.leadZero(n.hours%12?n.hours%12:12):this.leadZero(n.hours),n:n.minutes,N:this.leadZero(n.minutes),s:n.seconds,S:this.leadZero(n.seconds),a:n.hours>11?"pm":"am",A:n.hours>11?"PM":"AM"},a=new RegExp(Object.keys(s).join("|"),"g");switch(e){case"U":i=Date.UTC(n.year,n.month,n.date,n.hours,n.minutes,n.seconds);break;case"X":i="HN".replace(a,(function(t){return s[t]}));break;default:i=e.replace(a,(function(t){return s[t]}));break}return i},renderTitle:function(t,e){var i="";return-1==["datetime","date"].indexOf(this.options.pickerType)?e=this.options.pickerType:i=this.selectedDate||this.currentYear+"/01/01","<div class='title titleButton' data-nav = '"+i+"' data-view = '"+e+"'> "+t+" </div><div class='fav favButton' data-nav = '"+this.defaultValue+"' data-view = '"+e+"'> &hearts; </div>"},renderPrevious:function(t,e){return"<div class='title prevButton' data-nav = '"+t+"' data-view = '"+e+"'>&lt;</div>"},renderNext:function(t,e){return"<div class='title nextButton' data-nav = '"+t+"' data-view = '"+e+"'>&gt;</div>"},renderMonth:function(){var e,n,s,a,r=new Date(this.currentYear,this.currentMonth,1),o=new Date(this.currentYear,this.currentMonth+1,0),h=new Date(this.currentYear,this.currentMonth,0).getDate(),l=r.getDay(),c=o.getDay(),d=this.options.monthsTitle[this.currentMonth]+" "+this.currentYear;switch(n=null!==this.options.disabledDates?this.dateRange(this.options.disabledDates):[],e=null!==this.options.disabledDays?this.options.disabledDays.split(","):[],this.currentMonth){case 0:s=this.currentYear-1+"/12/1",a=this.currentYear+"/"+(this.currentMonth+2)+"/1";break;case 11:s=this.currentYear+"/"+this.currentMonth+"/1",a=this.currentYear+1+"/1/1";break;default:s=this.currentYear+"/"+this.currentMonth+"/1",a=this.currentYear+"/"+(this.currentMonth+2)+"/1";break}var u=this.renderPrevious(s,this.currentView)+this.renderTitle(d,"month")+this.renderNext(a,this.currentView);for(i=this.options.startDay-1;i<this.options.startDay+6;i++)u+="<div class='title'>"+this.options.daysTitle[i%7].substring(0,this.options.dayShort)+"</div>";if(l-(this.options.startDay-1)!=0)for(k=(l-this.options.startDay+7)%7;k>=0;k--){var p=h-k,v=Math.abs((k-l)%7);f=this.currentMonth?this.currentYear+"/"+this.currentMonth+"/"+p:this.currentYear-1+"/12/"+p,u+="<div class='otherday day"+v+" "+(y=this.minMax(f,this.options.minDate,this.options.maxDate)||t.inArray(new Date(f).valueOf(),n)>-1||t.inArray(v+"",e)>-1?"disabled":"")+"' data-nav = '"+f+"'>"+p+"</div>"}for(j=1;j<=o.getDate();j++){v=Math.abs((j+l)%7)||"7";f=this.currentYear+"/"+(this.currentMonth+1)+"/"+j;var y=this.minMax(f,this.options.minDate,this.options.maxDate)||t.inArray(new Date(f).valueOf(),n)>-1||t.inArray(v+"",e)>-1?"disabled":"";u+="<div class='day day"+v+" "+(j==this.currentDate?"selected":"")+" "+y+"' data-nav = '"+f+"'>"+j+"</div>"}for(m=1;m<=42-o.getDate()-(l-this.options.startDay+1+7)%7;m++){v=Math.abs((m+c+1+7)%7)||"7";var f="11"==this.currentMonth?this.currentYear+1+"/1/"+m:this.currentYear+"/"+(this.currentMonth+2)+"/"+m;u+="<div class='otherday day"+v+" "+(y=this.minMax(f,this.options.minDate,this.options.maxDate)||t.inArray(new Date(f).valueOf(),n)>=0||t.inArray(v+"",e)>-1?"disabled":"")+"' data-nav = '"+f+"'>"+m+"</div>"}this.currentDate,this.options.monthsTitle[this.currentMonth].substring(0,this.options.monthShort),this.currentYear;return u},renderYear:function(){var t=this.currentYear-1+"/01/01",e=this.currentYear+1+"/01/01",n=this.renderPrevious(t,this.currentView)+this.renderTitle(this.currentYear,"year")+this.renderNext(e,this.currentView);for(i=0;i<12;i++){var s=this.currentYear+"/"+(i+1)+"/1";n+="<div class='month "+(i==this.currentMonth?"selected":"")+"' data-view = 'date' data-nav = '"+s+"'>"+this.options.monthsTitle[i].substring(0,this.options.monthShort)+"</div>"}return n},renderDecade:function(){var t=this.currentYear-this.currentYear%20,e=t-20+"/01/01",n=t+20+"/01/01",s=t+" - "+(t+19),a=this.renderPrevious(e,this.currentView)+this.renderTitle(s,"decade")+this.renderNext(n,this.currentView);for(i=0;i<20;i++){var r=t+i+"/1/1";a+="<div class='year "+(t+i==this.currentYear?"selected":"")+"' data-view = 'month' data-nav = '"+r+"'>"+(t+i)+"</div>"}return a},renderTime:function(){var t=this.options.monthsTitle[this.currentMonth]+" "+this.currentDate+", "+this.currentYear,e=this.renderPrevious("",this.currentView)+this.renderTitle(t,"date")+this.renderNext("",this.currentView),i="",n=new Date,s=new Date(this.selectedDate||n),a=n.getHours()>12?(n.getHours()-12<10?"0":"")+(n.getHours()-12):(n.getHours()<10&&n.getHours()>0?"0":"")+(n.getHours()||12),r=(n.getMinutes()<10?"0":"")+n.getMinutes(),o=(n.getSeconds()<10?"0":"")+n.getSeconds(),h=n.getHours()<12?"AM ":"PM",l=s.getFullYear()+"/"+(s.getMonth()+1)+"/"+s.getDate()+" ",c=a+":"+r+":"+o+" "+h;return n.getHours()>12&&(i="checked"),e+="<div class='time'><span class='error'>"+(this.minMax(l+c,l+this.options.minTime,l+this.options.maxTime)?"Invalid Time":"")+"</span><div><input type='number' min='1' max='12' step='1' class='hour' value='"+a+"' /><label>:</label><input type='number' min='0' max='59'  step='1' class='min' value='"+r+"' /><label>:</label><input type='number' min='0' max='59' step='1' class='sec' value='"+o+"' /></div><p><input type='checkbox' class='ampm' value='pm' "+i+">PM</input></p>",e+="<p><button class='timeButton' data-view = 'time' data-date = '"+l+" ' data-nav = '"+l+c+"'>"+c+"</button></p></div>"},renderCalendar:function(e,i){this.selectedDate=i;var n=this.dateComponents(i);return this.options.disabledDays?this.options.disabledDays.split(","):[],this.defaultDate=new Date,this.defaultValue=this.defaultDate.getFullYear()+"/"+(this.defaultDate.getMonth()+1)+"/"+this.defaultDate.getDate(),this.currentDate=n.date,this.currentView=e,this.currentYear=n.year,this.currentMonth=n.month,t.proxy((function(){switch(this.currentView){default:case"datetime":return this.renderMonth();break;case"date":return this.renderMonth();break;case"month":return this.renderYear();break;case"year":return this.renderDecade();break;case"time":return this.renderTime();break}}),this)}}}(jQuery);